#!/bin/bash
network_diagnostics() { print_info "Starting Network Diagnostics..."; print_info "Checking Network Interfaces..."; if ip link show | grep -v "lo:" | grep "state UP"; then print_success "Network interface is up"; else print_error "No active network interface found"; return 1; fi; print_info "Testing DNS Resolution..."; if host google.com &>/dev/null; then print_success "DNS resolution working"; else print_error "DNS resolution failed"; fi; print_info "Testing Internet Connectivity..."; if ping -c 1 8.8.8.8 &>/dev/null; then print_success "Internet connectivity working"; else print_error "Internet connectivity failed"; fi; print_info "Checking for Network Issues..."; local ping_result=$(ping -c 3 8.8.8.8 2>/dev/null | tail -1 | awk "{print \$4}" | cut -d "/" -f 2); if [[ -n "$ping_result" ]]; then if (( $(echo "$ping_result > 100" | bc -l) )); then print_warning "High latency detected: ${ping_result}ms"; else print_success "Latency normal: ${ping_result}ms"; fi; fi; print_info "Checking Default Gateway..."; if ip route | grep -q default; then print_success "Default gateway configured: $(ip route | grep default | awk "{print \$3}")"; else print_error "No default gateway configured"; fi; print_info "Checking Network Services..."; if systemctl is-active --quiet NetworkManager; then print_success "NetworkManager is running"; else print_warning "NetworkManager is not running"; fi; return 0; }
